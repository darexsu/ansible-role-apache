---
# apache
#  ├── install
#  |    ├── packages
#  |    ├── dependencies
#  |    └── repositories
#  └── config
#       ├── apache.conf
#       └── virtualhost.conf

# apache
apache:
  enabled: false  
  service:
    enabled: true
    state: "started"

# apache -> install
apache_install:
  enabled: false
  packages:
    Debian: [apache2]
    RedHat: [httpd]
  dependencies:
    Debian: []
    RedHat: []

# apache -> config -> apache.conf
apache_conf:
  enabled: false
  file: "{{ apache_const[ansible_os_family]['conf_file'] }}"
  src: "{{ apache_const[ansible_os_family]['conf_src'] }}"
  backup: false

# apache -> config -> {virtualhost}.conf
apache_virtualhost:
  default_conf:
    enabled: false    
    file: "{{ apache_const[ansible_os_family]['virtualhost_default_file'] }}"
    state: "present"
    src: "apache__virtualhost.j2"   
    backup: false
    vars:
      ip: "*"
      port: "80"
      ServerName: "www.example.com"
      ServerAdmin: "webmaster@localhost"
      DocumentRoot: "/var/www/html"
      ErrorLog: "/var/log/{{ apache_const[ansible_os_family]['service_name'] }}/error.log"
      CustomLog: "/var/log/{{ apache_const[ansible_os_family]['service_name'] }}/access.log combined"
      SSLEngine: ""
      SSLCertificateFile:	""
      SSLCertificateKeyFile: ""

# ------ CONSTANTS --------
apache_const:
  Debian:
    service_name: "apache2"
    conf_file: "apache2.conf"
    conf_path: "/etc/apache2/"
    conf_src: "apache__conf_Debian.j2"
    virtualhost_path: "/etc/apache2/sites-available/"
    virtualhost_default_file: "000-default.conf"
  RedHat:
    service_name: "httpd"
    conf_file: "httpd.conf"
    conf_path: "/etc/httpd/conf/"
    conf_src: "apache__conf_RedHat.j2"
    virtualhost_path: "/etc/httpd/conf.d/"
    virtualhost_default_file: "welcome.conf"